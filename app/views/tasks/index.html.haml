.container-fluid.vh-100.pt-3
  .vstack.gap-3.mb-4
    %p.mb-0.pb-1.border-bottom.fw-bold 絞り込み
    .hstack.gap-4.align-items-center
      - if @tags.exists?
        .hstack.gap-2.align-items-center
          %small= Task.model_name.human
          - @tags.each do |tag|
            = link_to tasks_path(tag_id: tag.id) do
              %span.badge{ style: "background-color: #{tag.color};" }= tag.name
        .vr
      = form_with url: tasks_path, method: :get, class: "row g-3 align-items-center" do |f|
        .col-auto
          = f.label :perform_on, Task.human_attribute_name(:perform_on)
        .col-auto
          = f.date_field :perform_on, value: params[:perform_on], html5: true, class: "form-control"
        .col-auto
          = f.submit "絞り込み", class: "btn btn-secondary btn-sm"
      .vr
      = link_to "リセット", tasks_path, class: "btn btn-dark btn-sm"
  .d-flex.gap-2
    - status_hash = Task.status.options.map { [it[1].to_sym, it[0]] }.to_h
    - status_hash.each do |key, value|
      .w-25.d-flex.flex-column.align-items-center.gap-2
        .d-flex.justify-content-between.align-items-center.w-100.py-2.border-bottom
          %h3.fs-4.mb-0.text-info= value
          - if key == :new
            = link_to "作成", new_task_path, class: "btn btn-secondary"
        .list-group.w-100
          - @tasks.with_status(key).each do |task|
            = link_to edit_task_path(task), class: "list-group-item list-group-item-action" do
              = render 'task', task:
